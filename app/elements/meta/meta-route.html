<link rel="import" href="../auth/auth-fetch.html">

<dom-module id="meta-route">
  <template>
    <auth-fetch auto="{{!noLoad}}" url="{{href}}" last-json="{{metaResponse}}" params="{{params}}"></auth-fetch>
    <meta-resource model="{{lastJson}}">
      <content></content>
    </meta-resource>
  </template>
  <script>
    Polymer({
      is: "meta-route",
      properties: {
        href: {
          type: String,
          reflectToAttribute: true
        },
        metaResponse: {
          type: Object,
          notify: true
        },
        expand: {
          type: String,
          notify: true,
          value: ""
        },
        noLoad: {
          type: Boolean,
          notify: true,
          value: false
        },
        params: {
          computed: "_computeParams(expand)"
        }
      },
      _computeParams: function (expand) {
        if (!!expand) {
          return {
            headers: {
              Accept: "application/json;expand=" + expand
            }
          };
        } else {
          return {};
        }
      }
    });
  </script>
</dom-module>